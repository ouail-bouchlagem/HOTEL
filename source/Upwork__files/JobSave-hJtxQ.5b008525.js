(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{1948:function(e){e.exports=JSON.parse('{"jti_SaveJob_11":"Save Job","jti_SaveJobTitle_12":"Save job {jobTitle}"}')},1949:function(e){e.exports=JSON.parse("{}")},2566:function(e,t,o){"use strict";o.r(t);var n=o(57),r=o.n(n),d=o(23),l=o(94),c=o.n(l),v=o(93),h={},j=o(2),S=Object(j.a)(h,(function(){var e=this._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 14 14",role:"img"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M3.938 1.683c-1.206 0-2.188.999-2.188 2.227 0 .487.153.95.441 1.339l4.81 5.996 4.829-6.021c.268-.364.421-.827.421-1.314 0-1.228-.982-2.227-2.188-2.227-1.206 0-2.187.999-2.187 2.227h-1.75c0-1.228-.982-2.227-2.188-2.227zM7.001 14L.785 6.252A3.888 3.888 0 010 3.91C0 1.754 1.767 0 3.938 0c1.236 0 2.34.568 3.063 1.455A3.94 3.94 0 0110.063 0c2.171 0 3.938 1.754 3.938 3.91 0 .839-.265 1.641-.766 2.316L7.001 14z"}})])}),[],!1,null,null,null).exports,J={},f=Object(j.a)(J,(function(){var e=this._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 14 14",role:"img"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M7 3.646C7 1.632 5.433 0 3.5 0S0 1.632 0 3.646c0 .813.256 1.566.689 2.172L7 14l6.311-8.182A3.73 3.73 0 0014 3.646C14 1.632 12.433 0 10.5 0S7 1.632 7 3.646"}})])}),[],!1,null,null,null).exports,m=o(421),w=o(0),C=o(169);let y="/ab/find-work";"undefined"!=typeof window&&window.location.href.includes("jobs/search")&&(y="/ab/jobs/search");var O={namespaced:!0,state:()=>({jobRidsQueue:[],savedJobs:{},channel:null}),actions:{createAndSubscribeOnChannel(e){let{state:t,commit:o}=e;t.channel||(o("setChannel",new C.a("job")),o("setChannelListener",(e=>{"save-state-change"===e.type&&o("setJobSaved",{rid:e.jobRid,isSaved:e.state})})))},postMessage(e,data){let{commit:t}=e;t("postChannelMessage",{type:"save-state-change",jobRid:data.rid,state:data.isSaved})},fetchCollectedJobs(e){let{commit:t,state:o}=e;const n=o.jobRidsQueue;n.length&&this.$http({handleApiErrors:!1}).url("".concat(y,"/api/jobs/saved")).query({"rids[]":n}).get().json().then((e=>t("setSavedJobs",e))).finally((()=>{t("jobRidsQueueDelete")}))},fetchSavedJobs(e,t){let{dispatch:o,commit:n}=e;n("jobRidsQueueAdd",Array.isArray(t)?t:[t]),o("fetchCollectedJobs")},saveJob(e,t){let{commit:o,dispatch:n,state:r}=e,{rid:d}=t;const{isSaved:l}=r.savedJobs[d]||{},c={rid:d,isSaved:!l},v={rid:d,isSaved:l};return o("setJobSaved",c),n("postMessage",c),this.$http().url("".concat(y,"/api/jobs/save")).post(c).json().then((()=>c)).catch((()=>{o("setJobSaved",v),n("postMessage",v)}))}},mutations:{jobRidsQueueAdd(e,t){e.jobRidsQueue=Array.from(new Set([...e.jobRidsQueue,...t]))},jobRidsQueueDelete(e){e.jobRidsQueue=[]},setSavedJobs(e,t){Object.keys(t).forEach((o=>{w.default.set(e.savedJobs,o,t[o])}))},setJobSaved(e,t){let{rid:o,isSaved:n}=t;e.savedJobs[o]||(e.savedJobs[o]={}),w.default.set(e.savedJobs[o],"isSaved",n)},setChannel(e,t){e.channel=t},setChannelListener(e,t){e.channel.addEventListener("message",t)},postChannelMessage(e,data){e.channel.postMessage(data)}},getters:{hasSavedJobs:e=>Object.values(e.savedJobs).some((e=>e.isSaved))}},_={en:o(1948),is:o(1949)},A={injectStyles:[c.a],components:{ClientOnly:r.a,UpCIconV2:v.default,BulkProcessing:m.a},props:{job:{type:Object,required:!0}},i18n:{messages:_},computed:{...Object(d.e)("jobSave",["savedJobs"]),isSaved(){return!!this.savedJobs[this.job.recno]&&this.savedJobs[this.job.recno].isSaved},iconFavorite(){return this.isSaved?f:S},isLoading(){return void 0===this.savedJobs[this.job.recno]}},beforeCreate(){this.$store.hasModule("jobSave")||this.$store.registerModule("jobSave",O),"undefined"!=typeof window&&this.$store.dispatch("jobSave/createAndSubscribeOnChannel")},methods:{...Object(d.b)("jobSave",["fetchSavedJobs","saveJob"]),...Object(d.b)("events",["logJobSaveClick"]),async saveJobAndLog(e){const{isSaved:t}=await this.saveJob({rid:e.recno});this.logJobSaveClick({job:{...e,isSaved:t}})}}},x=Object(j.a)(A,(function(){var e=this,t=e._self._c;return t("button",{staticClass:"up-btn up-btn-default up-btn-circle",attrs:{type:"button",disabled:e.isLoading,"data-test":"job-save-button","aria-label":e.$t("jti_SaveJobTitle_12",{jobTitle:e.job.title})},on:{click:function(t){return e.saveJobAndLog(e.job)}}},[t("ClientOnly",[t("BulkProcessing",{attrs:{name:"savedJobs",data:e.job.recno},on:{process:e.fetchSavedJobs}})],1),e._v(" "),t("span",{staticClass:"sr-only"},[e._v(e._s(e.$t("jti_SaveJobTitle_12",{jobTitle:e.job.title})))]),e._v(" "),t("UpCIconV2",{attrs:{icon:e.iconFavorite}})],1)}),[],!1,null,null,null);t.default=x.exports},421:function(e,t,o){"use strict";const n={};var r={props:{name:{type:String,required:!0},data:{type:[Object,String,Array,Number],required:!0}},mounted(){const e=(t=this.name,n[t]||(n[t]={timeout:null,items:[]}),n[t]);var t;e.items.push(this.data),clearTimeout(e.timeout);e.timeout=setTimeout((()=>{const t=[];e.items.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),this.$emit("process",t),t.forEach((t=>{e.items.splice(e.items.indexOf(t),1)}))}),300)},render:()=>null},d=o(2),component=Object(d.a)(r,undefined,undefined,!1,null,null,null);t.a=component.exports}}]);
//# sourceMappingURL=https://upwork-usw2-staging-assets-jsmaps.s3.us-west-2.amazonaws.com/FindWorkHomeNuxt/JobSave-hJtxQ.5b008525.js.map
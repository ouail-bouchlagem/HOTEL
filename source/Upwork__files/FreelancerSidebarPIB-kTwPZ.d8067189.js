(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{1118:function(e,t,n){"use strict";var c=n(527);const r="/freelancers/api/v1/profile/me/pib";var o={getStatus:e=>e({cache:!1,handleApiErrors:!1}).url("".concat(r,"/status")).get().json(),getStatuses:(e,t)=>e({cache:!1,handleApiErrors:!1}).url("".concat(r,"/statuses?profileUids=").concat(t.join(","))).get().json(),getIsViewedRecently:e=>e({cache:!0,handleApiErrors:!1}).url("".concat(r,"/is-viewed-recently")).get().json(),postTurnOff:(e,t)=>e({cache:!1,handleApiErrors:!1}).url("".concat(r,"/off")).post({reason:t}).json(),postTurnOn:(e,t)=>e({cache:!1,handleApiErrors:!1}).url("".concat(r,"/on")).post({maxPrice:t}).json()};var l={namespaced:!0,state:()=>({isFetching:!1,context:{isFreelancer:!1,isAgency:!1,hasAgencies:!1,currentAgencyName:null},availability:{capacity:null},visibility:null,personUid:null,active:!1,currentPrice:-1,maxPrice:-1,consumedConnectFraction:null,eligible:!1,availableConnects:-1,statuses:{},isViewedRecentlyFetching:!1,isViewedRecentlyFetched:!1,isViewedRecently:null}),mutations:{setFetching(e,t){e.isFetching=t},setStatus(e,t){let{personUid:n,active:c,currentPrice:r,maxPrice:o,consumedConnectFraction:l,eligible:d,availableConnects:h}=t;e.personUid=n,e.active=c,e.currentPrice=r,e.maxPrice=o,e.consumedConnectFraction=l,e.eligible=d,e.availableConnects=h},setContext(e,t){let{isFreelancer:n,isAgency:c,hasAgencies:r,currentAgencyName:o}=t;if("boolean"!=typeof n)throw new TypeError("`isFreelancer` should be a boolean.");if("boolean"!=typeof c)throw new TypeError("`isAgency` should be a boolean.");if("boolean"!=typeof r)throw new TypeError("`hasAgencies` should be a boolean.");if("string"!=typeof o&&null!==o)throw new TypeError("`currentAgencyName` should either be a string or null.");e.context.isFreelancer=n,e.context.isAgency=c,e.context.hasAgencies=r,e.context.currentAgencyName=o},setAvailability(e,t){let{capacity:n}=t;if(void 0===n)throw new TypeError("`capacity` should be defined.");e.availability.capacity=n},setVisibility(e,t){if("number"!=typeof t||Number.isNaN(t))throw new TypeError("`visibility` should be a number.");e.visibility=t},setActive(e,t){if("boolean"!=typeof t)throw new TypeError("`active` should be a boolean.");e.active=t},setMaxPrice(e,t){if("number"!=typeof t||Number.isNaN(t))throw new TypeError("`maxPrice` should be a number.");e.maxPrice=t},setStatuses(e,t){if(Array.isArray(t)||"object"!=typeof t)throw new TypeError("`statuses` should be an object.");if(Object.keys(t).find((e=>"boolean"!=typeof t[e])))throw new TypeError("`statuses` object should contain only booleans.");e.statuses=t},setIsViewedRecentlyFetching(e,t){e.isViewedRecentlyFetching=t},setIsViewedRecentlyFetched(e,t){e.isViewedRecentlyFetched=t},setIsViewedRecently(e,t){e.isViewedRecently=t}},getters:{getStatus:e=>t=>!!e.statuses[t]},actions:{async fetchStatus(e){let{commit:t}=e;try{t("setFetching",!0);const e=await o.getStatus(this.$http);t("setStatus",e),t("setContext",e.context),t("setAvailability",e.availability),t("setVisibility",e.visibility),t("setFetching",!1)}catch(e){throw t("setFetching",!1),console.error("Failed to fetchStatus.",e),e}},async fetchStatuses(e,t){let{commit:n}=e,{profileUids:c}=t;try{n("setStatuses",(await o.getStatuses(this.$http,c)).statuses)}catch(e){throw console.error("Failed to fetchStatuses.",e),e}},async fetchIsViewedRecently(e){let{commit:t}=e;try{t("setIsViewedRecentlyFetching",!0);t("setIsViewedRecently",(await o.getIsViewedRecently(this.$http)).viewedRecently),t("setIsViewedRecentlyFetched",!0)}catch(e){throw console.error("Failed to fetchIsViewedRecently.",e),e}finally{t("setIsViewedRecentlyFetching",!1)}},async turnOff(e,t){let{commit:n}=e,{reason:c}=t;try{await o.postTurnOff(this.$http,c),n("setActive",!1)}catch(e){throw console.error("Failed to turnOff.",e),e}},async turnOn(e,t){let{commit:n}=e,{maxPrice:c}=t;try{await o.postTurnOn(this.$http,c),n("setActive",!0)}catch(e){throw console.error("Failed to turnOn.",e),e}},async setMaxPrice(e,t){let{commit:n}=e,{maxPrice:c}=t;try{await o.postTurnOn(this.$http,c),n("setMaxPrice",c)}catch(e){throw console.error("Failed to setMaxPrice.",e),e}}}},d={beforeCreate(){var e,t;null!==(e=(t=this.$store).hasModule)&&void 0!==e&&e.call(t,c.a)||this.$store._modules.get([c.a])||this.$store.registerModule(c.a,l,{preserveState:!!this.$store.state[c.a]})}},h=n(2),component=Object(h.a)(d,undefined,undefined,!1,null,null,null);t.a=component.exports},2621:function(e,t,n){"use strict";n.r(t);var c=n(23),r=n(93),o=n(330),l=n.n(o),d=n(314),h=n.n(d),y=n(319),f=n.n(y),w=n(94),v=n.n(w),m=n(345),F=n.n(m),C=n(527),A=n(1118);const x=()=>Promise.all([n.e(17),n.e(47),n.e(1168)]).then(n.bind(null,1620)),_=()=>n.e(35).then(n.bind(null,587));var P={injectStyles:[l.a,h.a,f.a,v.a,F.a],components:{UpCIconV2:r.default,PibBadge:x,PibCore:()=>n.e(1169).then(n.bind(null,2640)),PibManagement:()=>n.e(1170).then(n.bind(null,2697))},mixins:[A.a],data:()=>({iconEdit:_,isStatusFetched:!1}),computed:{...Object(c.e)("profile",["profile"]),...Object(c.e)("pib",["eligible","active"]),isPIBActive(){return this.active},isLoading(){return!this.profile||!this.isStatusFetched}},async mounted(){await this.fetchStatus()},methods:{...Object(c.b)(C.a,["fetchStatus"]),async onStatusFetch(){await x(),this.isStatusFetched=!0},onEditClick(){this.$refs.pibManagement.doEdit()},onTurnedOnCtaClick(){window.location.href="/freelancers/".concat(this.profile.identity.ciphertext)}}},S=n(2),component=Object(S.a)(P,(function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-test":"freelancer-sidebar-pib"}},[e.isLoading?t("div",{staticClass:"pb-20"},[e._m(0),e._v(" "),t("div",{staticClass:"up-skeleton-shape",staticStyle:{width:"70%"}})]):e.eligible?t("div",{staticClass:"pb-20"},[t("div",{staticClass:"row align-items-center pb-xl-0 pb-lg-5"},[t("div",{staticClass:"col-6 col-xl-7 pr-0"},[t("strong",[e._v(e._s(e.$t("fwh_pib_HeadingAvailabilityBadge")))])]),e._v(" "),t("div",{staticClass:"col"},[t("button",{staticClass:"up-btn up-btn-default up-btn-circle up-btn-sm",attrs:{disabled:!e.isStatusFetched,type:"button","data-ev-unique_element_id":"t-fwh_pib_EditAvailabilityBadge"},on:{click:e.onEditClick}},[t("span",{staticClass:"sr-only"},[e._v(e._s(e.$t("fwh_pib_EditAvailabilityBadge")))]),e._v(" "),t("UpCIconV2",{attrs:{icon:e.iconEdit}})],1)])]),e._v(" "),t("PibBadge",{staticClass:"pt-5",attrs:{"is-active":e.isPIBActive}}),e._v(" "),t("PibManagement",{ref:"pibManagement",on:{"turned-on-cta-click":e.onTurnedOnCtaClick}})],1):e._e(),e._v(" "),t("ClientOnly",[t("PibCore",{attrs:{"is-owner":!0},on:{"status-fetch":e.onStatusFetch}})],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"up-skeleton-shape mb-10"},[e("strong",[this._v("Â ")])])}],!1,null,null,null);t.default=component.exports},527:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));const c="pib"}}]);
//# sourceMappingURL=https://upwork-usw2-staging-assets-jsmaps.s3.us-west-2.amazonaws.com/FindWorkHomeNuxt/FreelancerSidebarPIB-kTwPZ.d8067189.js.map